<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Distribution</title>
    <style>
        body {
            background-color: #D1D1D6;
        }

        .back-placeholder {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            align-items: flex-start;
            border-radius: 2em;
            background: #F2F2F7;
            padding: 20px;
            margin: 20px;
        }

        .front-placeholder {
            border-radius: 2em;
            background: #FFFFFF;
            padding: 20px;
            margin: 20px;
            width: 500px;
            height: 250px;
        }

        .field-div {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            align-items: flex-start;
            margin: 10px;
            padding: 10px;
        }

        #debtor-info {
        }

        #buttons {
        }

    </style>
</head>
<body>

    <div class="back-placeholder">

        <div class="front-placeholder" id="debtor-info">
            <h3>Данные должника</h3>

            <label for="cash">
                Конкурсная масса:
            </label>
            <br>
            <input type="text" id="cash" />
        </div>

        <div class="front-placeholder" id="buttons">
            <h3>Управление</h3>

            <button id="add-creditor">
                Добавить кредитора
            </button>

            <button id="calculate">
                Расчитать
            </button>

            <button id="clear">
                Очистить
            </button>
        </div>

    </div>


    <div class="back-placeholder" id="creditors-info"></div>


    <div class="back-placeholder" id="result-info"></div>

    <script>
        let creditors_info = [];

        document.getElementById('add-creditor').addEventListener('click', function () {
            let creditor_frame = document.createElement('div');
            creditor_frame.className = 'front-placeholder';
            creditor_frame.id = 'creditor-frame-' + creditors_info.length;


            let name = document.createElement('input');
            name.type = 'text';
            name.placeholder = 'Имя кредитора';
            name.id = 'creditor-name-' + creditors_info.length;

            let name_label = document.createElement('label');
            name_label.htmlFor = 'creditor-name-' + creditors_info.length;
            name_label.innerText = 'Имя кредитора';


            let value = document.createElement('input');
            value.type = 'number';
            value.placeholder = 'Сумма долга';
            value.id = 'creditor-value-' + creditors_info.length;

            let value_label = document.createElement('label');
            value_label.htmlFor = 'creditor-value-' + creditors_info.length;
            value_label.innerText = 'Сумма долга';


            let is_percent = document.createElement('input');
            is_percent.type = 'checkbox';
            is_percent.id = 'is-percent-' + creditors_info.length;
            is_percent.checked = false;

            let is_percent_label = document.createElement('label');
            is_percent_label.htmlFor = 'is-percent-' + creditors_info.length;
            is_percent_label.innerText = 'Является ли комиссия процентами?';


            let percent_or_fee = document.createElement('input');
            percent_or_fee.type = 'number';
            percent_or_fee.placeholder = 'Процент / фиксированная плата';
            percent_or_fee.id = 'creditor-percent-or-fee' + creditors_info.length;

            let percent_or_fee_label = document.createElement('label');
            percent_or_fee_label.htmlFor = 'creditor-percent-or-fee' + creditors_info.length;
            percent_or_fee_label.innerText = 'Комиссия';

            let delete_creditor = document.createElement('button');
            delete_creditor.innerText = 'Удалить кредитора';

            delete_creditor.addEventListener('click', function () {
                creditors_info.forEach(function (item, index) {
                    if (item.id === creditor_frame.id) {
                        creditors_info.splice(index, 1);
                    }
                });

                creditor_frame.remove();
            });


            let name_field = document.createElement('div');
            name_field.className = 'field-div';
            name_field.appendChild(name_label);
            name_field.appendChild(name);

            let value_field = document.createElement('div');
            value_field.className = 'field-div';
            value_field.appendChild(value_label);
            value_field.appendChild(value);

            let is_percent_field = document.createElement('div');
            is_percent_field.className = 'field-div';
            is_percent_field.appendChild(is_percent_label);
            is_percent_field.appendChild(is_percent);

            let percent_or_fee_field = document.createElement('div');
            percent_or_fee_field.className = 'field-div';
            percent_or_fee_field.appendChild(percent_or_fee_label);
            percent_or_fee_field.appendChild(percent_or_fee);

            let clear_field = document.createElement('div');
            clear_field.className = 'field-div';
            clear_field.appendChild(delete_creditor);


            creditor_frame.appendChild(name_field);
            creditor_frame.appendChild(value_field);
            creditor_frame.appendChild(is_percent_field);
            creditor_frame.appendChild(percent_or_fee_field);
            creditor_frame.appendChild(clear_field);

            document.getElementById('creditors-info').appendChild(creditor_frame);

            creditors_info.push({
                id: creditor_frame.id,
                name: name.id,
                value: value.id,
                is_percent: is_percent.id,
                percent_or_fee: percent_or_fee.id
            });
        });


        document.getElementById('calculate').addEventListener('click', function () {
            document.getElementById('result-info').innerHTML = '';

            let result = document.createElement('div');
            result.className = 'front-placeholder';
            result.id = 'result';

            let result_label = document.createElement('h3');
            result_label.innerText = 'Результат';

            result.appendChild(result_label);

            document.getElementById('result-info').appendChild(result);
        });


        document.getElementById('clear').addEventListener('click', function () {
            creditors_info = [];
            document.getElementById('creditors-info').innerHTML = '';
            document.getElementById('result-info').innerHTML = '';
        });
    </script>
</body>
</html>
